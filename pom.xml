<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	 xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>

    <groupId>eu.michael-simons</groupId>
    <artifactId>biking2</artifactId>
    <version>1.10.3-SNAPSHOT</version>

    <parent>
	<groupId>org.springframework.boot</groupId>
	<artifactId>spring-boot-starter-parent</artifactId>
	<version>1.3.0.RELEASE</version>
    </parent>

    <name>biking2</name>
    <url>http://maven.apache.org</url>
    
    <inceptionYear>2014</inceptionYear>
    
    <developers>
	<developer>
	    <name>Michael J. Simons</name>
	    <email>michael@simons.ac</email>	    
	</developer>
    </developers>
    
    <organization>
	<name>michael-simons.eu</name>
	<url>http://michael-simons.eu</url>
    </organization>

    <licenses>
	<license>
	    <name>Apache License, Version 2.0</name>
	    <url>http://www.apache.org/licenses/LICENSE-2.0</url>
	</license>
    </licenses>

    <properties>
	<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
	
	<maven.build.timestamp.format>yyyy-MM-dd HH:mm</maven.build.timestamp.format>
	<build-date>${maven.build.timestamp}</build-date>
		
	<java.version>1.8</java.version>
	<junit.version>4.11</junit.version>
	<bootstrap.version>3.1.1</bootstrap.version>
	<jquery.version>1.11.0</jquery.version>
	<angularjs.version>1.2.29</angularjs.version>
	<highcharts.version>3.0.10</highcharts.version>
	<openlayers.version>2.13.1</openlayers.version>
	<angular-ui-bootstrap.version>0.10.0</angular-ui-bootstrap.version>
	<angular-file-upload.version>1.2.5</angular-file-upload.version>
	<momentjs.version>2.10.6</momentjs.version>	
		
	<maven.compiler.source>${java.version}</maven.compiler.source>
	<maven.compiler.target>${java.version}</maven.compiler.target>
	
	<start-class>ac.simons.biking2.Application</start-class>	
	
	<snippetsDirectory>${project.build.directory}/generated-snippets</snippetsDirectory>
    </properties>

    <build>
	<plugins>
	    <plugin>
		<groupId>org.springframework.boot</groupId>
		<artifactId>spring-boot-maven-plugin</artifactId>
	    </plugin>
	    <plugin>
		<groupId>org.apache.maven.plugins</groupId>
		<artifactId>maven-compiler-plugin</artifactId>
		<configuration>
		    <target>${java.version}</target>
		    <source>${java.version}</source>
		    <encoding>${project.build.sourceEncoding}</encoding>
		    <compilerArgs>
			<arg>-parameters</arg>
		    </compilerArgs>	
		</configuration>
	    </plugin>
	    <plugin> 
		<groupId>org.asciidoctor</groupId>
		<artifactId>asciidoctor-maven-plugin</artifactId>
		<version>1.5.2</version>
		<executions>
		    <execution>
			<id>generate-docs</id>
			<phase>prepare-package</phase> 
			<goals>
			    <goal>process-asciidoc</goal>
			</goals>
			<configuration>
			    <backend>html</backend>
			    <doctype>book</doctype>
			    <imagesDir>img</imagesDir>
			    <attributes>
				<snippets>${snippetsDirectory}</snippets> 
			    </attributes>
			</configuration>
		    </execution>
		</executions>
	    </plugin>
	    <plugin>
		<groupId>org.apache.maven.plugins</groupId>
		<artifactId>maven-resources-plugin</artifactId>
		<version>2.7</version>
		<configuration>
		    <encoding>${project.build.sourceEncoding}</encoding>
		    <overwrite>false</overwrite>
		</configuration>
		<executions>
		    <execution>
			<id>copy-resources</id>
			<phase>prepare-package</phase>
			<goals>
			    <goal>copy-resources</goal>
			</goals>
			<configuration>
			    <outputDirectory>
				${project.build.outputDirectory}/public/docs
			    </outputDirectory>
			    <resources>
				<resource>
				    <directory>
					${project.build.directory}/generated-docs
				    </directory>
				</resource>
			    </resources>
			</configuration>
		    </execution>
		</executions>
	    </plugin>
	    <plugin>
		<groupId>org.apache.maven.plugins</groupId>
		<artifactId>maven-enforcer-plugin</artifactId>
		<version>1.2</version>
		<executions>
		    <execution>
			<id>enforce</id>
			<configuration>
			    <rules>
				<DependencyConvergence />
			    </rules>
			</configuration>
			<goals>
			    <goal>enforce</goal>
			</goals>
			<phase>validate</phase>
		    </execution>
		</executions>
	    </plugin>
	    <plugin>
		<groupId>org.zeroturnaround</groupId>
		<artifactId>jrebel-maven-plugin</artifactId>
		<version>1.1.3</version>
		<configuration>
		    <alwaysGenerate>true</alwaysGenerate>
		</configuration>
		<executions>
		    <execution>
			<id>generate-rebel-xml</id>
			<phase>process-resources</phase>
			<goals>
			    <goal>generate</goal>
			</goals>
		    </execution>
		</executions>
	    </plugin>
	    <plugin>
		<groupId>org.apache.maven.plugins</groupId>
		<artifactId>maven-source-plugin</artifactId>
		<version>2.1.2</version>
		<executions>
		    <execution>
			<goals>
			    <goal>jar</goal>
			</goals>
		    </execution>
		</executions>
	    </plugin>
	    <plugin>
		<groupId>org.jacoco</groupId>
		<artifactId>jacoco-maven-plugin</artifactId>
		<version>0.7.5.201505241946</version>
		<configuration>
		    <excludes>
			<!-- Application starter -->
			<exclude>ac/simons/biking2/Application.class</exclude>
			<!-- Checked JAXBException while creating contexts -->
			<exclude>ac/simons/biking2/misc/JAXBContextFactory.class</exclude>
			<!-- Configuration -->
			<exclude>ac/simons/biking2/config/*</exclude>			
		    </excludes>
		</configuration>
		<executions>
		    <execution>
			<id>pre-unit-test</id>
			<goals>
			    <goal>prepare-agent</goal>
			</goals>
		    </execution>
		    <execution>
			<id>post-unit-test</id>
			<phase>test</phase>
			<goals>
			    <goal>report</goal>		
			    <goal>check</goal>
			</goals>
			<configuration>
			    <rules>
				<!--  implmentation is needed only for Maven 2  -->
				<rule implementation="org.jacoco.maven.RuleConfiguration">
				    <element>BUNDLE</element>
				    <limits>
					<limit implementation="org.jacoco.report.check.Limit">
					    <counter>INSTRUCTION</counter>
					    <value>COVEREDRATIO</value>
					    <minimum>0.95</minimum>			
					</limit>
					<!--  implmentation is needed only for Maven 2  -->
					<limit implementation="org.jacoco.report.check.Limit">
					    <counter>COMPLEXITY</counter>
					    <value>COVEREDRATIO</value>
					    <minimum>0.90</minimum>
					</limit>
				    </limits>
				</rule>
			    </rules>
			</configuration>
		    </execution>
		</executions>
	    </plugin>	    	    
	</plugins>
	<resources>
	    <resource>
		<directory>src/main/resources</directory>
	    </resource>
	    <resource>
		<directory>src/main/resources</directory>
		<filtering>true</filtering>
		<includes>
		    <include>build.properties</include>
		</includes>
	    </resource>
	    <resource>
		<directory>src/main/webapp</directory>
	    </resource>
	    <resource>
		<directory>src/main/webapp</directory>
		<filtering>true</filtering>
		<includes>
		    <include>**/*.html</include>
		</includes>
	    </resource>
	</resources>
    </build>

    <dependencies>
	<dependency>
	    <groupId>org.springframework.boot</groupId>
	    <artifactId>spring-boot-starter-web</artifactId>
	</dependency>
	<dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-security</artifactId>
        </dependency>	
	<dependency>
	    <groupId>org.springframework.boot</groupId>
	    <artifactId>spring-boot-starter-thymeleaf</artifactId>
	</dependency>
	<dependency>
	    <groupId>org.springframework.boot</groupId>
	    <artifactId>spring-boot-starter-websocket</artifactId>
	</dependency>	
	<dependency>
	    <groupId>org.springframework.boot</groupId>
	    <artifactId>spring-boot-starter-data-jpa</artifactId>
	</dependency>
	<dependency>
	    <groupId>org.springframework.boot</groupId>
	    <artifactId>spring-boot-starter-actuator</artifactId>
	</dependency>

	<dependency>
	    <groupId>com.fasterxml.jackson.module</groupId>
	    <artifactId>jackson-module-jaxb-annotations</artifactId>
	    <version>${jackson.version}</version>
	</dependency>
	
	<dependency>
	    <groupId>com.h2database</groupId>
	    <artifactId>h2</artifactId>
	</dependency>	
	<dependency>
	    <groupId>org.springframework</groupId>
	    <artifactId>spring-jms</artifactId>
	</dependency>		
	<dependency>
	    <groupId>org.apache.activemq</groupId>
	    <artifactId>activemq-spring</artifactId>	    
	</dependency>
	<dependency>
	    <groupId>org.apache.activemq</groupId>
	    <artifactId>activemq-stomp</artifactId>	    		
	</dependency>		
	<!-- Resolve for activemq-client and activemq-mqtt -->
	<dependency>
	    <groupId>org.fusesource.hawtbuf</groupId>
	    <artifactId>hawtbuf</artifactId>
	    <version>1.11</version>
	</dependency>	
	<dependency>
	    <groupId>org.apache.activemq</groupId>
	    <artifactId>activemq-mqtt</artifactId>	    	  
	    <exclusions>
		<exclusion>
		    <groupId>org.fusesource.hawtbuf</groupId>
		    <artifactId>hawtbuf</artifactId>
		</exclusion>
	    </exclusions>
	</dependency>
	<!-- Needed for MessageBrokerRegistry#enableStompBrokerRelay -->
	<dependency>
	    <groupId>io.projectreactor</groupId>
	    <artifactId>reactor-net</artifactId>        
	</dependency>   
	<dependency>
	    <groupId>io.netty</groupId>
	    <artifactId>netty-all</artifactId>
	    <version>4.0.31.Final</version>
	</dependency>  	
		
	<!-- Tests and development -->
	<dependency>
	    <groupId>org.springframework.boot</groupId>
	    <artifactId>spring-boot-starter-test</artifactId>
	    <scope>test</scope>
	</dependency>	
	<dependency>
	    <groupId>org.jooq</groupId>
	    <artifactId>joor</artifactId>
	    <version>0.9.5</version>
	    <scope>test</scope>
	</dependency>
	<dependency> 
	    <groupId>org.springframework.restdocs</groupId>
	    <artifactId>spring-restdocs-mockmvc</artifactId>	    	    
	    <scope>test</scope>
	</dependency>
	
	<!-- Web UI -->
	<dependency>
	    <groupId>org.webjars</groupId>
	    <artifactId>bootstrap</artifactId>
	    <version>${bootstrap.version}</version>
	    <exclusions>
		<exclusion>
		    <groupId>org.webjars</groupId>
		    <artifactId>jquery</artifactId>
		</exclusion>
	    </exclusions>
	</dependency>
	<dependency>
	    <groupId>org.webjars</groupId>
	    <artifactId>jquery</artifactId>
	    <version>${jquery.version}</version>
	</dependency>
	<dependency>
	    <groupId>org.webjars</groupId>
	    <artifactId>angularjs</artifactId>
	    <version>${angularjs.version}</version>
	</dependency>
	<dependency>
	    <groupId>org.webjars</groupId>
	    <artifactId>angular-ui-bootstrap</artifactId>
	    <version>${angular-ui-bootstrap.version}</version>
	    <exclusions>
		<exclusion>
		    <groupId>org.webjars</groupId>
		    <artifactId>angularjs</artifactId>
		</exclusion>
		<exclusion>
		    <groupId>org.webjars</groupId>
		    <artifactId>bootstrap</artifactId>
		</exclusion>
	    </exclusions>
	</dependency>
	<dependency>	    
	    <groupId>org.webjars</groupId>
	    <artifactId>angular-file-upload</artifactId>
	    <version>${angular-file-upload.version}</version>
	</dependency>
	<dependency>
	    <groupId>org.webjars</groupId>
	    <artifactId>momentjs</artifactId>
	    <version>${momentjs.version}</version>
	</dependency>	
	<dependency>
	    <groupId>org.webjars</groupId>
	    <artifactId>highcharts</artifactId>
	    <version>${highcharts.version}</version>
	</dependency>
	<dependency>
	    <groupId>org.webjars</groupId>
	    <artifactId>openlayers</artifactId>
	    <version>${openlayers.version}</version>
	</dependency>	
    </dependencies>
</project>
